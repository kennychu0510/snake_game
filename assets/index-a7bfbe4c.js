var m=Object.defineProperty;var b=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var n=(e,t,r)=>(b(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function r(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerpolicy&&(h.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?h.credentials="include":o.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function c(o){if(o.ep)return;o.ep=!0;const h=r(o);fetch(o.href,h)}})();const u=300,y=400,s=20,d=y/s,l=u/s;var i=(e=>(e[e.RIGHT=0]="RIGHT",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.UP=3]="UP",e))(i||{});const p=20;class L{constructor(){n(this,"rows",u/s);n(this,"columns",y/s)}draw(t){t.strokeStyle="grey";for(let r=0;r<this.rows*s;r+=s)for(let c=0;c<this.columns*s;c+=s)t.strokeRect(r,c,s,s)}}class T{constructor(t,r,c){n(this,"ctx");n(this,"x",Math.ceil(Math.random()*l));n(this,"y",Math.ceil(Math.random()*d));this.ctx=t;let o=!1;do this.spawn(),o=this.checkClash(r,c);while(o)}draw(){this.ctx.fillStyle="lime",this.ctx.fillRect(this.x*s,this.y*s,s,s)}spawn(){this.x=Math.floor(Math.random()*l),this.y=Math.floor(Math.random()*d)}checkClash(t,r){if(t.x===this.x&&t.y===this.y)return!0;for(let c of r)if(c.x===this.x&&c.y===this.y)return!0;return!1}}class D{constructor(t){n(this,"length",2);n(this,"color","red");n(this,"head",{x:Math.floor(l/2),y:d/2});n(this,"body");n(this,"ctx");n(this,"direction");n(this,"tick",0);n(this,"food");this.ctx=t,this.direction=i.RIGHT,this.body=[{x:this.head.x-1,y:this.head.y}],this.food=new T(t,this.head,this.body)}draw(){this.food.draw(),this.ctx.fillStyle=this.color,this.tick++,this.ctx.fillRect(this.head.x*s,this.head.y*s,s,s);for(let t of this.body)this.ctx.fillRect(t.x*s,t.y*s,s,s);this.tick%p===0&&this.update()}update(){switch(this.body.unshift({x:this.head.x,y:this.head.y}),this.body=this.body.slice(0,this.length-1),this.direction){case i.RIGHT:this.head.x===l-1?this.head.x=0:this.head.x+=1;break;case i.DOWN:this.head.y===d-1?this.head.y=0:this.head.y+=1;break;case i.LEFT:this.head.x===0?this.head.x=l-1:this.head.x-=1;break;case i.UP:this.head.y===0?this.head.y=d-1:this.head.y-=1;break}this.head.x===this.food.x&&this.head.y===this.food.y&&(this.food.spawn(),this.length++,this.update())}changeDirection(t){this.direction===i.RIGHT&&t===i.LEFT||this.direction===i.LEFT&&t===i.RIGHT||this.direction===i.UP&&t===i.DOWN||this.direction===i.DOWN&&t===i.UP||(this.direction=t)}}class U{constructor(t){n(this,"ctx");n(this,"snake");n(this,"background",new L);this.ctx=t,this.snake=new D(this.ctx)}draw(){this.snake.draw(),this.background.draw(this.ctx)}}function f(e){const t=document.querySelector(e);if(!t)throw new Error(e+" not found");return t}const k=f("canvas"),E=f("#left-button"),G=f("#right-button"),P=f("#down-button"),S=f("#up-button"),w=k.getContext("2d");k.width=u;k.height=y;window.devicePixelRatio=2;const a=new U(w);function g(){v(w),a.draw(),requestAnimationFrame(g)}function v(e){e.clearRect(0,0,u,y)}g();document.addEventListener("keydown",e=>{switch(e.key){case"a":case"ArrowLeft":a.snake.changeDirection(i.LEFT);break;case"s":case"ArrowDown":a.snake.changeDirection(i.DOWN);break;case"d":case"ArrowRight":a.snake.changeDirection(i.RIGHT);break;case"w":case"ArrowUp":a.snake.changeDirection(i.UP);break}});E.addEventListener("click",()=>{a.snake.changeDirection(i.LEFT)});G.addEventListener("click",()=>{a.snake.changeDirection(i.RIGHT)});P.addEventListener("click",()=>{a.snake.changeDirection(i.DOWN)});S.addEventListener("click",()=>{a.snake.changeDirection(i.UP)});
